#include <iostream>
using namespace std;

//пузырьковая сортировка по убыванию
void sortDesc(int a[], int n) {
    for (int i = 0; i < n - 1; i++) { //цикл для проходов
        for (int j = 0; j < n - i - 1; j++) { //цикл для сравнений
            if (a[j] < a[j + 1]) { //сравниваем элементы
                int t = a[j]; //меняем местами если нужно
                a[j] = a[j + 1];
                a[j + 1] = t;
            }
        }
    }
}

//проверка и сортировка по убыванию
void check(int a[], int n) {
    bool ok = true; 

    for (int i = 1; i < n; i++) { //проверяем весь массив
        if (a[i - 1] < a[i]) { //если найден неправильный порядок
            ok = false; //массив не отсортирован
            break;
        }
    }

    if (ok) { //если массив уже отсортирован
        cout << "массив уже отсортирован по убыванию" << endl;
    }
    else { //если не отсортирован
        cout << "массив не отсортирован по убыванию" << endl;
        cout << "  сортируем" << endl;
        sortDesc(a, n); 
    }
}

//сортировка четных элементов
void chetnoe(int a[], int n) {
    for (int i = 0; i < n - 1; i++) { //цикл
        for (int j = 0; j < n - i - 1; j++) { //внутренний цикл
            if (a[j] % 2 == 0 && a[j + 1] % 2 == 0) { //проверяем оба элемента на четность
                if (a[j] < a[j + 1]) { //сравниваем четные элементы
                    int t = a[j]; //меняем их местами
                    a[j] = a[j + 1];
                    a[j + 1] = t;
                }
            }
        }
    }
}

//вывод массива
void printArr(int a[], int n, string msg = "") {
    if (!msg.empty()) { //если есть сообщение
        cout << msg << ": "; //выводим его
    }
    for (int i = 0; i < n; i++) { //перебираем все элементы
        cout << a[i] << " "; //выводим элемент
    }
    cout << endl; 
}

//ввод массива от пользователя
void inputArr(int a[], int n) {
    cout << "введите " << n << " целых чисел:" << endl;
    for (int i = 0; i < n; i++) { //цикл по всем элементам
        cout << "элемент " << i + 1 << ": ";
        cin >> a[i]; //ввод каждого элемента
    }
}

int main() {
    setlocale(LC_ALL, "RU");
    int sz; 
    int ch; 

    cout << "алгоритмы сортировки массивов" << endl;
    cout << "введите размер массива: ";
    cin >> sz; 

    if (sz <= 0) {
        cout << "ошибка размер массива должен быть больше 0" << endl;
        return 1; 
    }

    int* arr = new int[sz]; //выделение памяти для массива

    do { 
        cout << "меню выбора задания:" << endl;
        cout << "1. пузырьковая сортировка по убыванию" << endl;
        cout << "2. проверка и сортировка по убыванию" << endl;
        cout << "3. сортировка четных элементов" << endl;
        cout << "0. выход" << endl;
        cout << "выберите задание (0-3): ";
        cin >> ch; 

        if (ch == 0) { //если выбран выход
            cout << "выход из программы" << endl;
            break;
        }

        if (ch < 1 || ch > 3) { //проверка корректности выбора
            cout << "ошибка: неверный выбор! пожалуйста, выберите от 0 до 3" << endl;
            continue; 
        }

        cout << "ввод данных" << endl;
        inputArr(arr, sz); 

        int* tmp = new int[sz]; 
        for (int i = 0; i < sz; i++) {
            tmp[i] = arr[i]; 
        }

        switch (ch) { 
        case 1: 
            cout << "результат задания 1" << endl;
            printArr(tmp, sz, "исходный массив");
            sortDesc(tmp, sz); //сортировка по убыванию
            printArr(tmp, sz, "массив после сортировки по убыванию");
            break;

        case 2: 
            cout << "результат задания 2" << endl;
            printArr(tmp, sz, "исходный массив");
            check(tmp, sz); //проверка и сортировка
            printArr(tmp, sz, "результат");
            break;

        case 3: 
            cout << "результат задания 3" << endl;
            printArr(tmp, sz, "исходный массив");

            cout << "четные элементы в массиве: ";
            for (int i = 0; i < sz; i++) { //вывод четных элементов
                if (tmp[i] % 2 == 0) {
                    cout << tmp[i] << " ";
                }
            }
            cout << endl;

            chetnoe(tmp, sz);
            printArr(tmp, sz, "массив после сортировки четных элементов");

            cout << "четные элементы после сортировки: ";
            for (int i = 0; i < sz; i++) { 
                if (tmp[i] % 2 == 0) {
                    cout << tmp[i] << " ";
                }
            }
            cout << endl;
            break;
        }

    } while (ch != 0); 
    cout << "программа завершена" << endl;

    return 0; 
}
